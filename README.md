# Дорогой друг!
Я не знаю, кто ты, на чем пишешь и предпочитаешь ли ты пробелы табам. 

Мне заказали сделать вёрстку этого проекта, и я постарался сделать её максимально доступной к внедрению на любой платформе. Конечная статическая нарезка лежит в каталоге **www**. На случай, если тебе захочется что-то в ней изменить, я оставляю тебе инфраструктуру для разработки и пишу эту краткую документацию.

В случае, если я что-то забуду упомянуть, напиши мне вопрос на [ivan.metelev@yandex.ru](ivan.metelev@yandex.ru)

## Технологии и настройка рабочего окружения
Проект собран для работы в условиях браузерной неопределенности и должен работать ориентировочно в ie edge, iOS > 5, но это не точно (потому что в ТЗ не прописывалось). Проект умеет функционировать в условиях отсутствия js в каком-то минимальном виде (в основном для улучшения индексации).

Использован HTML5, CSS3 через less + autoprefixer, ES6 через webpack + babel.

Для автоматизации процесса разработки используются инструменты поверх node.js. Минимальную версию ноды не скажу, ставь последнюю, а у меня работает на 7.8.0.

После установки ноды для автоматической установки инструментов разработки тебе нужно будет выполнить из корня проекта

**npm i**

Надеюсь, что у тебя не возникнет проблем с уровнем вложенности npm_modules — раньше такое бывало под Windows.
Кроме того, скорее всего понадобится установить пару инструментов глобально.

### Gulp
Система сборки. Запускается глобально, поэтому придется поставить с дополнительным флагом

**sudo npm i gulp -g**

Теперь ты можешь запускать сборку проекта. У сборщика есть несколько разных таргетов, отраженных в Gulpfile.js:

**gulp clean** — очистит результат сборки
**gulp watch** — соберет проект в дев-режиме с вотчерами и локалсервером
**gulp** — соберет полноценный билд в директорию www

### Harp
Статический генератор, обеспечивающий функционирование в дев-режиме и, частично, результирующую сборку.

Сборка с использованием статического генератора сделана для того, чтобы тебе было проще нарезать шаблончики, а также для выделения «реиспользуемых модульных компонентов».

Генератор использует шаблонизатор ejs, который почти как html, умеет инклюды и представление о текущем стейте, поэтому если какие-либо части кода будут непонятны, вот документация [http://harpjs.com/docs/](http://harpjs.com/docs/)

Не исключено, что он тоже может захотеть ставиться глобально, но вроде бы я его пытался отучать.

### Less
У проекта амбициозная дизайнерская сетка, поэтому пришлось поработать с препроцессором. 

Общая методология — MCSS, которая почти как БЭМ, только использует немного другой нейминг для элементов block_element и сокращенные модификаторы __modificator. Выделяется два уровня: уровень атомарных элементов (base) и уровень более общей композиции (project).

Общая сборка происходит путем компиляции файла style.less, в который предварительно импортируются все составляющие.

Надеюсь, тебе не придется менять стили проекта, но если так, удели, пожалуйста, внимание утилитному модулю _utils.less. Я постарался оставлять комментарии в наиболее неочевидных местах.

### JS
Как я упоминал выше, в целом, проект может жить без использования JS (особенно на широком мониторе). Однако для улучшения UX используется модульная система, обслуживаемая Webpack.

Модули описаны в AMD-нотации и, в основном, являются локально применимыми фрагментами кода. Для гарантии локального применения использован «механизм хуков». Его идея такова: при загрузке страницы загрузчик обходит дерево, выбирая узлы с классом js-hook. Затем он определяет соответствующие модули, используя значения из атрибутов data-module. Затем на каждом узле активируется его модуль, при активации загрузчик передает методу activate экземпляр узла. Для успешной работы каждый такой модуль должен быть унаследован от AbstractModule.js с реализацией его интерфейса.

В результирующей сборке весь js собирается в единый бандл. Полезно знать, что в теории возможна и точечная модульная подгрузка, но я не увидел причин к её использованию в рамках текущих требований.